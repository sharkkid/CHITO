<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta content="width=device-width,initial-scale=1.0,user-scalable=no" name="viewport" />
    <link href="stylesheets/browse-94a09320.css" rel="stylesheet" />
  </head>
  <body>
    <header>
      <div class="page-title">
        瀏覽
      </div>
      <a class="right user button" href="#"></a>
    </header>
    <main>
  <!--       <article class="featured" style="background-image: url(/storage/emulated/0/story_assets/playbook_list/icon_1.png)">
          <header>
            劇情列表
          </header>
        </article> -->
      <section id="list_container">
<!--         <header>
          台北
          <div class="small">
            城市之旅／文化深度體驗
          </div>
        </header> -->
<!--         <article class="entry">
          <div class="thumbnail" style="background-image: url(/storage/emulated/0/story_assets/playbook_list/icon_1.png)"></div>
          <div class="meta">
            <div class="title">
              爺奶攪藝術
            </div>
            <div class="description">
              和爺奶展開藝術的探索旅程＃共融藝術
            </div>
          </div>
          <div class="actions">
            <a class="like" href="#"></a>
            <a class="download" href="#" onclick="javascript:playbook_downloader(1)"></a>
          </div>
        </article> -->
      </section>
      <section>
        <header>
          更多推薦故事
        </header>
        <article class="entry">
          <div class="thumbnail" style="background-image: url(images/demo/featured-77999b4f.png)"></div>
          <div class="meta">
            <div class="title" id="test">
              爺奶攪藝術
            </div>
            <div class="description">
              和爺奶展開藝術的探索旅程＃共融藝術
            </div>
          </div>
          <div class="actions">
            <a class="like" href="#"></a><a class="download" href="#"></a>
          </div>
        </article>
      </section></main>
    <footer class="tabs">
      <a class="browse active" href="browse.html"></a>
      <a class="liked" href="liked.html"></a>
      <a class="downloaded" href="downloaded.html"></a>
      <a class="search" href="search.html"></a>
    </footer>
  </body>
      <script>
      function callAndroid(){
        Chito.ShowToast("js调用了android中的hello方法");
      }

      function callJS(text){
        Chito.ShowToast(text);
      }

      function playbook_downloader(playbook_n){
      //劇本下載
        Chito.Playbook_downloader(playbook_n);
      }

      function fakecall(ring_id,call_id,name,next_sceneId,message,caller_number){
      //劇本下載
        Chito.loadFakeCall(ring_id,call_id,name,next_sceneId,message,caller_number);
      }
       function Playbook_start(playbook_n){
      //開啟劇本
        Chito.Playbook_start(playbook_n);
      }

      function send_playbook_list_total(total,booklist_info) {        
        // document.getElementById("test").innerHTML = document.getElementById("list_container").childElementCount;
        var i;
        var book_info_split = booklist_info.split("|");
        var book_info = new Array();
        for(var k=0;k<total;k++){ //一維長度為i,i為變數，可以根據實際情況改變
        book_info[k]=new Array(); //宣告二維，每一個一維陣列裡面的一個元素都是一個陣列；
          for(var j=0;j<5;j++){ //一維陣列裡面每個元素陣列可以包含的數量p，p也是一個變數；
            book_info[k][j]=""; //這裡將變數初始化，我這邊統一初始化為空，後面在用所需的值覆蓋裡面的值
          }
        }
        var container = document.getElementById("list_container");
        for (i = 0; i < total; i++) {
          var book_info_temp = book_info_split[i].split(',');
          book_info[i][0] = book_info_temp[0];// book_id
          book_info[i][1] = book_info_temp[1];// 確認是否下載的旗標
          book_info[i][2] = book_info_temp[2];// book_title
          book_info[i][3] = book_info_temp[3];// book_describtion
          book_info[i][4] = book_info_temp[4];// 確認是否愛心的旗標
        }
        var playbook = "";
        for (i = 0; i < total; i++) {
          
          // playbook.setAttribute("class","entry");
          var id=book_info[i][0];
          var download_flag = "";
          var title=book_info[i][2];
          var description=book_info[i][3];
          var like_flag = "";
          var action = "";

          if(book_info[i][1] == "0"){
            download_flag = "undo download";
            action = "playbook_downloader";
          }
          else{
            download_flag = "download";
            action = "Playbook_start";
          }
          if(book_info[i][4] == "0")
            like_flag = "undo like";
          else
            like_flag = "like";
  
          playbook +='<article class="entry"><div class="thumbnail" style="background-image: url(/storage/emulated/0/story_assets/playbook_list/icon_'+id+'.png)"></div><div class="meta"><div class="title">'+title+'</div><div class="description">'+description+'</div></div> <div class="actions"><a class="'+like_flag+'" href="#" onclick="java{script:qq()"></a><a class="'+download_flag+'" href="#" onclick="javascript:'+action+'('+id+')"></a></div></article>';
          // console.log(playbook);
        }
        // if(container.childElementCount == 0){
           container.innerHTML = playbook;
        // }
      }
      // send_playbook_list_total(2,"1,1,test1,test1,0|2,0,test2,test2,1");
  </script>
</html>